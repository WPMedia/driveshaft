name: driveshaft
namespace: siteeng-lincoln
type: ecs
environments:
  - name: staging
    resources:
      - vendor: aws
        resource: simple
        settings:
          scheme: internal
          domain: driveshaft-staging.wpit.nile.works
          parent_domain: wpit.nile.works
          certificate: arn:aws:iam::766513428554:server-certificate/star.wpit.nile.works_4-3-2018
        healthcheck:
          path: "/health"
    override:
      services:
        app:
          log_driver: awslogs
          log_opt:
            awslogs-group: /nile/siteeng-lincoln/driveshaft/staging
            awslogs-region: us-east-1
    services:
      - desiredCount: 1
        loadBalancers:
          - containerName: app
            containerPort: 3000
  - name: prod
    resources:
      - vendor: aws
        resource: simple
        settings:
          scheme: internal
          domain: driveshaft.wpit.nile.works
          parent_domain: wpit.nile.works
          certificate: arn:aws:iam::766513428554:server-certificate/star.wpit.nile.works_4-3-2018
        healthcheck:
          path: "/health"
    override:
      services:
        app:
          log_driver: awslogs
          log_opt:
            awslogs-group: /nile/siteeng-lincoln/driveshaft/prod
            awslogs-region: us-east-1
    services:
      - desiredCount: 2
        loadBalancers:
          - containerName: app
            containerPort: 3000
